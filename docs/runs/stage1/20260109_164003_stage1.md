# Run: stage1 â€” 20260109_164003_stage1

- Git commit: `d780252874d62712404f7d6159781f167959a77b`
- Command: `fly-olf-stage1 build --config stage1_dataset/configs/default.yaml`

## Artifacts
- trials: `data/trials.parquet`
- features: `data/features.parquet`
- qc_dir: `data/qc_plots/`
- qc_report: `reports/feature_extraction_qc.md`

## Config (sanitized)
```json
{
  "detection": {
    "k_std": 4.5,
    "min_duration_s": 0.05,
    "min_peak_over_threshold": 0.0
  },
  "features": {
    "export_cols": [
      "per",
      "latency_s",
      "duration_s",
      "baseline_mean",
      "baseline_std",
      "threshold",
      "peak",
      "auc_pos_s"
    ]
  },
  "filters": {
    "drop_if_non_reactive_flag": false,
    "drop_if_tracking_flagged": false,
    "max_nan_frac": 0.2,
    "non_reactive_flag_col": "non_reactive_flag",
    "tracking_flag_col": "tracking_flagged"
  },
  "paths": {
    "input_csv": "<REDACTED>",
    "model_predictions_csv": "<REDACTED>",
    "output_dir": "<REDACTED>",
    "protocol_map_csv": "<REDACTED>",
    "qc_dir": "<REDACTED>",
    "reports_dir": "<REDACTED>",
    "testing_csv": "<REDACTED>",
    "training_csv": "<REDACTED>"
  },
  "protocol": {
    "cs_col": "cs_type",
    "odor_col": "odor_name",
    "odor_off_s_col": "odor_off_s",
    "odor_on_s_col": "odor_on_s",
    "reward_col": "reward"
  },
  "qc": {
    "dist_cols": [
      "latency_s",
      "duration_s",
      "auc_pos_s",
      "peak",
      "per"
    ],
    "n_random_trials": 30,
    "stratify_cols": [
      "phase",
      "trial_type",
      "odor_name"
    ]
  },
  "run": {
    "combine_train_test": true,
    "name": "<REDACTED>",
    "random_seed": 1337
  },
  "schema": {
    "fly_id_format": "<REDACTED>",
    "phase_rules": {
      "testing_contains": [
        "test"
      ],
      "training_contains": [
        "train"
      ]
    },
    "pulse_idx_regex": "(\\d+)\\s*$",
    "required_cols": [
      "<REDACTED>",
      "fly",
      "fly_number",
      "trial_type",
      "trial_label"
    ]
  },
  "trace": {
    "clip_max": null,
    "clip_min": null,
    "fill_method": "none",
    "fps_col": "fps",
    "trace_prefix": "dir_val_"
  },
  "windowing": {
    "analysis_frac": 1.0,
    "baseline_frac": 0.2
  }
}
```
